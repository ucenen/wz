(function($){$.extend({getHashParam:function(prefix,win){win=win||window;if($.isNull(prefix)){return win.location.hash}if(!win.location.hash.length){return null}var params=win.location.hash.substr(1).split(",");for(var i=0;i<params.length;i++){if(params[i].substr(0,prefix.length)==prefix){return params[i].substr(prefix.length)}}return null},setHashParam:function(prefix,val,win){if($.isNull(prefix)){return}win=win||window;var hash="";var b=true;var params=win.location.hash.substr(1).split(",");for(var i=0;i<params.length;i++){if(params[i].substr(0,prefix.length)==prefix){if(!$.isNull(val)){hash+=","+prefix+val}b=false}else{if(params[i]!=""){hash+=","+params[i]}}}if(b){if($.isNull(val)){return}hash+=","+prefix+val}var url=win.location.href;var p=url.indexOf("#");if(p!=-1){url=url.substr(0,p)}url+="#"+hash.substr(1);win.location.replace(url)},isNull:function(v){return v===undefined||v===null},checkNull:function(v,def){if($.isNull(v)){return def}return v},getReqParam:function(name,win){win=win||window;var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=win.location.search.substr(1).match(reg);if(r!=null){return decodeURI(r[2])}return null},eachReplaceParam:function(tpl,array,filter,encode){if(tpl==null){return""}if($.isArray(array)){var str="";for(var i=0;i<array.length;i++){str+=$.replaceParam(tpl,array[i],filter,encode)}return str}return $.replaceParam(tpl,array,filter,encode)},replaceParam:function(tpl,obj,filter,encode){if(tpl==null||obj==null){return""}if(typeof filter==="boolean"){encode=filter;filter=undefined}return tpl.replace(/\@\{(.+?)\}/g,function(a0,a1){var v=$.eval(obj,a1,filter,encode);if(v===undefined){return a0}if(v===null){return""}return v})},eval:function(obj,name,filter,encode){if(name===undefined||name===null||name==""){return obj}var i=name.indexOf("~");var prop=name;if(i!=-1){prop=name.substr(0,i);name=name.substring(i+1,name.length)}if(filter&&filter[prop]!==undefined){var ff=filter[prop];var ov=name.length?$.eval(obj,name):undefined;if(typeof ff==="function"){return ff.call(obj,ov,name)}if(ff instanceof jQuery){if(ov!==undefined){var sov=ov===null?"":String(ov);ff.find("option,[data-val]").each(function(){var _t=$(this);if(_t.attr("value")==sov||_t.data("val")==sov){ov=_t.text();return false}})}return ov}if($.isPlainObject(ff)){if(ov!==undefined){var sov=ov===null?"":String(ov);if(ff[sov]!==undefined){return ff[sov]}}return ov}return ff}var ps=name.split("."),r=obj,l=ps.length;for(var i=0;i<l&&r!==undefined&&r!==null;i++){r=r[ps[i]]}if(encode!==false&&(typeof r==="string")){return $.htmlEncode(r)}return r},removeFromArray:function(val,arr){var i=$.inArray(val,arr);if(i>-1){arr.splice(i,1);return true}return false},parseInt:function(str,def){try{var i=parseInt(str);return isNaN(i)?def:i}catch(e){}return def},htmlEncode:function(text){if(text==null||text==""){return text}return $("<div>").text(text).html()},pageSubmit:function(url,params,method,target){if(!$.isPlainObject(params)){target=method;method=params;params=undefined}method=method||"POST";var tmpForm=$("<form></form>");tmpForm.attr("action",url).attr("method",method);if(target){tmpForm.attr("target",target)}if(params&&typeof params=="object"){for(var p in params){var vs=params[p];if(!$.isArray(vs)){vs=[vs]}for(var i=0,len=vs.length;i<len;i++){var oInput=$('<input type="hidden" />').appendTo(tmpForm);oInput.attr("name",p);oInput.attr("value",vs[i])}}}tmpForm.appendTo(document.body).submit();tmpForm.remove()},dateFormat:function(date,format){var o={"M+":date.getMonth()+1,"d+":date.getDate(),"h+":date.getHours(),"m+":date.getMinutes(),"s+":date.getSeconds(),"q+":Math.floor((date.getMonth()+3)/3),S:date.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(date.getFullYear()+"").substr(4-RegExp.$1.length))}for(var k in o){if(new RegExp("("+k+")").test(format)){format=format.replace(RegExp.$1,RegExp.$1.length==1?o[k]:("00"+o[k]).substr((""+o[k]).length))}}return format},getAbsoluteUrl:function(url){var a=document.createElement("A");a.href=url;return a.href}});$.fn.extend({serializeObj:function(){var fd={};var t=$(this).serializeArray();$.each(t,function(){var d=fd[this.name];if(d===undefined){fd[this.name]=this.value}else{if(d instanceof Array){d.push(this.value)}else{fd[this.name]=new Array(d,this.value)}}});return fd},dataVal:function(val){if(val===undefined){val=$(this).val();if($.isNull(val)){return $(this).data("val")}return val}else{$(this).val(val);if($.isNull($(this).val())){$(this).data("val",val)}}}})})(window.jQuery);(function(c){var a={tpl:'<div tabindex="-1" role="dialog"><div class="modal-dialog modal-sm" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button><h4 class="modal-title"></h4></div><div class="modal-body"><button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button><div class="modal-msg"></div></div><div class="modal-footer"></div></div></div></div>',buttonTpl:'<button type="button" class="btn"></button>',baseClass:"modal x-bootmsg",className:"fade",width:null,closeButton:true,backdrop:true,keyboard:true,show:true,modelCallback:null,buttons:{cancel:{label:'<i class="fas fa-times"></i> &nbsp;取 消',className:"btn-sm btn-default",callback:null,close:true},confirm:{label:'<i class="fas fa-check"></i> &nbsp;确 定',className:"btn-sm btn-danger",callback:null,close:true},ok:{label:'<i class="fas fa-check"></i> &nbsp;确 定',className:"btn-sm btn-primary",callback:null,close:true}},callback:null};var b=function(n){var k=c(a.tpl).addClass(a.baseClass).appendTo("body");var j=c.extend({},a,n);if(j.width!=null){k.find(".modal-dialog").css("width",j.width)}if(j.className!=null){k.addClass(j.className)}var g=k.find(".modal-header");if(j.title!=null){g.show();g.children(".modal-title").html(j.title);if(j.closeButton){g.children(".close").show()}else{g.children(".close").hide()}}else{g.hide()}var h=k.find(".modal-body");if(j.message!=null){h.show();h.children(".modal-msg").html(j.message);if(j.closeButton&&j.title==null){h.children(".close").show()}else{h.children(".close").hide()}}else{h.hide()}var l=k.find(".modal-footer");if(j.buttons!=null){l.html("").show();for(var e in j.buttons){var m=j.buttons[e];if(m==null){continue}var f=c(a.buttonTpl).html(m.label).appendTo(l);if(m.focus){f.attr("data-focus",true)}if(m.className!=null){f.addClass(m.className)}if(m.close){f.attr("data-dismiss","modal")}var i=m.callback||j.callback;if(i){f.click({callback:i,name:e,data:j.data},function(o){var p=o.data;p.callback.call(k,p.name,p.data)})}}k.on("shown.bs.modal",function(){c(this).find(".modal-footer button[data-focus]:last").focus()})}else{l.hide()}if(j.modelCallback!=null){for(var e in j.modelCallback){if(j.modelCallback[e]!=null){k.on(e+".bs.modal",j.modelCallback[e])}}}k.on("hidden.bs.modal",function(){c(this).remove()});k.modal({backdrop:j.backdrop,keyboard:j.keyboard,show:j.show});return k};var d=function(f,g,h,e){if(c.isPlainObject(f)){e=f}else{if(c.isPlainObject(g)){e=g;e.message=f}else{if(c.isFunction(g)){e=h||{};e.callback=g;e.message=f}else{if(c.isPlainObject(h)){e=h;e.title=g;e.message=f}else{e=e||{};e.title=g;e.message=f;e.title=g;e.callback=h}}}}return e};c.extend({bootmsgSetup:function(e){a=c.extend(a,e)},alert:function(f,g,h,e){e=d(f,g,h,e);e.buttons=c.extend(true,{ok:c.extend({focus:true},a.buttons.ok)},e.buttons);return b(e)},confirm:function(f,g,h,e){e=d(f,g,h,e);e.buttons=c.extend(true,{cancel:c.extend({},a.buttons.cancel),confirm:c.extend({focus:true},a.buttons.confirm)},e.buttons);return b(e)},message:function(f,g,h,e){e=d(f,g,h,e);if(e.buttons){if(e.buttons.ok){e.buttons.ok=c.extend({},a.buttons.ok,e.buttons.ok)}if(e.buttons.confirm){e.buttons.confirm=c.extend({},a.buttons.confirm,e.buttons.confirm)}if(e.buttons.cancel){e.buttons.cancel=c.extend({},a.buttons.cancel,e.buttons.cancel)}}return b(e)}});c.fn.extend({alert:function(f,g,e){return c.alert(this.html(),f,g,e)},confirm:function(f,g,e){return c.confirm(this.html(),f,g,e)},message:function(f,g,e){return c.message(this.html(),f,g,e)}})})(window.jQuery);(function(){$(function(){$("body").on("change",":checkbox",function(){var b=$(this);if(b.is("[data-target]")){$(':checkbox:enabled[name="'+b.attr("data-target")+'"]').prop("checked",this.checked)}else{var a=b.attr("name");var c=$(':checkbox[data-target="'+a+'"]');if(c.length){c.prop("checked",$(':checkbox:enabled[name="'+a+'"]:not(:checked)').length==0)}}})})})(window.jQuery);(function(b){var a={loginUrl:null,redirectParamName:"redirectUrl",separator:"\n",message:"出错了",statusCode:{404:"页面不存在",401:function(){if(a.loginUrl){var d=encodeURIComponent(window.top.location.href);var c=a.loginUrl;c+=c.indexOf("?")==-1?"?":"&";c+=a.redirectParamName+"="+d;window.top.location.href=c}else{return"未登录或登录超时"}},403:"权限不足"},statusText:{timeout:"网络不给力",notmodified:"没有更新的内容",parsererror:"数据格式不正确"},resolveError:function(d){var e;if(d.data){if((d.data instanceof Array)&&d.data.length){e="";for(var c=0;c<d.data.length;c++){if(c!=0){e+=a.separator}e+=d.data[c]}}else{e=d.data}}else{e=null}a.renderError(e,d.error)},renderError:function(d,c){alert(d||c)}};b.extend({errorSetup:function(c){a=b.extend(a,c)}});b(window).ajaxError(function(g,f,d,j){var k;if(f){var c=f.status,k;if(c==0){return}if(a.statusCode){k=a.statusCode[c]}if(!k&&a.statusText){k=a.statusText[f.statusText]}if(typeof k==="function"){k=k.call(this,f,d,j);if(!k){return}}if(f.responseText!==undefined){try{var h=b.parseJSON(f.responseText);if(h.success===false){a.resolveError(h);return}}catch(i){k=k||f.responseText||j}}}a.renderError(k||j||a.message)});if(b.alert){b.errorSetup({separator:"<br>",renderError:function(d,c){b.alert(d,c,{width:450})}})}b.ajaxSetup({cache:false,jsonp:"jsonp.cb",traditional:true})})(window.jQuery);(function(a){var b={tplActive:'<li class="active"><span>@{currentPage}</span></li>',tplLink:'<li><a data-index="@{pageNumberIndex}" href="javascript:void(0)">@{pageNumber}</a></li>',tplEllipsis:'<li class="disabled"><span>...</span></li>',tplLimitSel:'，每页显示<select class="form-control input-sm">@{limits}</select>条记录',tplLimitOpt:'<option value="@{limit}">@{limit}</option>',tplLimitOptSel:'<option value="@{limit}" selected="selected">@{limit}</option>',tplCurRows:"，当前显示第@{currentStart}到@{currentEnd}条记录",tpl:'<p>共@{totalElements}条记录@{curRows}@{limitsSel}</p><ul class="pagination pagination-sm">@{pagers}</ul>',storageSize:"_$_x_pageSize_",oneIndexed:false,nearNum:3,showPageSizes:true,pageSizes:[10,15,20,50,100],html:function(){this.mathParam();return a.replaceParam(this.tpl,this,{pagers:this.pagersHtml,curRows:this.totalElements>0?a.replaceParam(this.tplCurRows,this):"",limitsSel:this.showPageSizes?this.limitsHtml:""})},events:{"a[data-index]":{click:function(c){var d=c.data;d.pageCallback(parseInt(a(this).attr("data-index")),d.pageSize,d.totalElements,d.totalPages)}},select:{change:function(d){var e=d.data;var c=parseInt(a(this).val());if(window.localStorage){if(e.storageSize){window.localStorage.setItem(e.storageSize,c)}else{window.localStorage.removeItem(e.storageSize)}}e.pageCallback(e.oneIndexed?1:0,c,e.totalElements,e.totalPages)}}},mathParam:function(){this.currentPage=this.oneIndex?this.currentPageIndex:this.currentPageIndex+1;if(this.totalElements>0){this.currentStart=(this.currentPage-1)*this.pageSize+1;this.currentEnd=this.currentPage>=this.totalPages?this.totalElements:(this.currentStart+this.pageSize-1)}else{this.currentStart=this.currentEnd=0}},pagersHtml:function(){var c="";if(this.totalPages>0){var f=function(e){var h={pageNumber:e,pageNumberIndex:this.oneIndex?e:e-1};return a.replaceParam(e==undefined?this.tplEllipsis:e==this.currentPage?this.tplActive:this.tplLink,this,h)};c+=f.call(this,1);if(this.totalPages>1){if(this.totalPages>2){var d=2;var g=this.totalPages;if(this.nearNum>=0){d=Math.max(this.currentPage-this.nearNum,d);g=Math.min(this.currentPage+this.nearNum+1,g);if(d>2){c+=f.call(this)}}for(;d<g;d++){c+=f.call(this,d)}if(g<this.totalPages){c+=f.call(this)}}c+=f.call(this,this.totalPages)}}return c},limitsHtml:function(){return a.replaceParam(this.tplLimitSel,this,{limits:function(){var c="",f=this;var e=a.extend({},f);for(var d in f.pageSizes){e.limit=f.pageSizes[d];c+=a.replaceParam(e.limit==f.pageSize?f.tplLimitOptSel:f.tplLimitOpt,e)}return c}})}};a.extend({paginationSetup:function(c){if(c){b=a.extend(b,c)}return b}});a.fn.extend({pagination:function(m,k,j,h,n){if(this.length==1){var g;if(arguments.length==1){n=m;g={totalPages:Math.ceil(n.totalElements/n.pageSize)};h=n.pageCallback}else{g={totalElements:m,currentPageIndex:k,pageSize:j,totalPages:Math.ceil(m/j),pageCallback:h}}if(typeof(h)=="string"){var e=h;g.pageCallback=function(r,p,o,q){location.href=a.replaceParam(e,{currentPageIndex:r,pageSize:p,totalElements:o,totalPages:q})}}n=a.extend({},b,n,g);this.empty();var i=a(n.html()).appendTo(this);for(var l in n.events){var f=i.find(l),d=n.events[l];for(var c in d){f.on(c,n,d[c])}}}else{if(this.length>1){this.each(function(){a(this).pagination(m,k,j)})}}return this}})})(window.jQuery);(function($){$.fn.extend({bindingVal:function(data,filter,encode){this.find("[data-name],:input[name]").each(function(){var t=$(this),field=t.data("name")||t.attr("name");var val=$.eval(data,field,filter,false);if(val===undefined){return true}if(val==null){val=""}if(t.is(":input")){if(t.is(":radio")||t.is(":checkbox")){if(val instanceof Array){t.prop("checked",$.inArray(t.val(),val)!=-1)}else{t.prop("checked",t.val()==String(val))}}else{if(t.is("select")){if((val instanceof Array)&&t.is("[multiple]")){t.dataVal(val)}else{t.dataVal(String(val))}}else{t.val(String(val))}}}else{if(encode===false){t.html(val)}else{t.text(val)}}});return this},bindingTpl:function(data,filter,encode){if(this.length==1){if(this.data("append")){this.append($.eachReplaceParam($(this.data("tpl")).html(),data,filter,encode))}else{this.html($.eachReplaceParam($(this.data("tpl")).html(),data,filter,encode))}if(this.is("select")){var val=this.data("val");if(!$.isNull(val)){this.val(val)}}}else{if(this.length>1){this.each(function(){$(this).bindingTpl(data,filter,encode)})}}return this},bindingPage:function(pageData,pageCallback,filter,encode){if(pageData){this.bindingTpl(pageData.content,filter,encode);this.each(function(){$($(this).data("pagination")).pagination(pageData.totalElements,pageData.number,pageData.size,pageCallback)})}return this},bindingLoad:function(filter,bindCallback,form,param,encode){if(!$.isPlainObject(filter)){encode=param;param=form;form=bindCallback;bindCallback=filter;filter=undefined}if(typeof bindCallback!=="function"){encode=param;param=form;form=bindCallback;bindCallback=undefined}if(!(form instanceof jQuery)){encode=param;param=form;form=undefined}if(typeof param==="boolean"){encode=param;param=undefined}if(form){param=$.extend(form.serializeObj(),param);form.find("select[data-val]").each(function(){var n=$(this).attr("name");var v=$(this).data("val");if(n&&!$.isNull(v)&&$.isNull(param[n])){param[n]=v}})}this.each(function(){var el=$(this);var loadFn;if(el.data("get")){loadFn=function(param,cb){$.get(el.data("get"),param,cb)}}else{if(el.data("post")){loadFn=function(param,cb){$.post(el.data("post"),param,cb)}}else{return}}var cb;if(el.is("[data-pagination]")){var _page=$.getHashParam("page_");var empObj={};if(_page!=null){var ps=_page.split("_");empObj.page=parseInt(ps[0]);empObj.size=parseInt(ps[1])}else{if(window.localStorage){var _ss=$.paginationSetup().storageSize;if(_ss){var _ssv=window.localStorage.getItem(_ss);if(_ssv&&_ssv!=""){empObj.size=parseInt(_ssv)}}}}param=$.extend(empObj,param);cb=function(data){el.bindingPage(data,function(page,size){param.page=page;param.size=size;loadFn(param,cb)},filter,encode);if(data.number==0){$.setHashParam("page_")}else{$.setHashParam("page_",data.number+"_"+data.size)}if(bindCallback){bindCallback.call(el,data)}}}else{cb=function(data){if(el.is("[data-tpl]")){el.bindingTpl(data,filter,encode)}else{el.bindingVal(data,filter,encode)}if(bindCallback){bindCallback.call(el,data)}}}loadFn(param,cb)});return this}})})(window.jQuery);(function(a){a.fn.extend({cascade:function(b,c){if(typeof b==="function"){c=b;b=null}a(this).change(function(){var g=a(this).val();var e=a(a(this).data("cascade"));e.html("");var f=e.data("prepend");if(f!=null){e.prepend(a(f).html())}if(g==""||g==null){var d=c?c.call(e):true;if(d!==false){e.change()}}else{if(b==null){b={}}b[e.data("param")||"pid"]=g;e.data("append",true);e.bindingLoad(function(){var h=c?c.apply(e,arguments):true;if(h!==false){e.change()}},b)}})}})})(window.jQuery);